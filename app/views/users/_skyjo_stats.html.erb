<%# Skyjo Stats Partial - User Profile %>
<% if skyjo_stats.present? %>
  <div class="mt-4">
    <div class="flex flex-row gap-8 items-center justify-center mb-6">
      <div class="flex flex-col items-center">
        <span class="text-2xl font-bold text-purple-700"><%= skyjo_stats[:total_games] || 0 %></span>
        <span class="text-yellow-700">Games Completed</span>
      </div>
      <div class="flex flex-col items-center">
        <span class="text-2xl font-bold text-yellow-500"><%= skyjo_stats[:win_count] || 0 %></span>
        <span class="text-purple-700">Games Won</span>
      </div>
      <div class="flex flex-col items-center">
        <div class="relative w-16 h-16">
          <svg viewBox="0 0 36 36" class="circular-chart" style="width:64px;height:64px;">
            <path class="circle-bg" stroke="#fef9c3" stroke-width="4" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
            <path class="circle" stroke="#a78bfa" stroke-width="4" stroke-linecap="round" fill="none"
              d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
              stroke-dasharray="<%= skyjo_stats[:win_percent] || 0 %>, 100" />
          </svg>
          <span class="absolute inset-0 flex items-center justify-center text-lg font-bold text-yellow-500"><%= skyjo_stats[:win_percent] || 0 %>%</span>
        </div>
        <span class="text-purple-700">Victory Rate</span>
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <div class="bg-white border-2 border-yellow-300 rounded p-4 shadow">
        <span class="font-semibold text-purple-700">Total Score:</span> <span class="text-yellow-700"><%= skyjo_stats[:total_score] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-purple-300 rounded p-4 shadow">
        <span class="font-semibold text-yellow-700">Average Score per Game:</span> <span class="text-purple-700"><%= skyjo_stats[:avg_score_game] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-yellow-300 rounded p-4 shadow">
        <span class="font-semibold text-purple-700">Average Score per Round:</span> <span class="text-yellow-700"><%= skyjo_stats[:avg_score_round] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-purple-300 rounded p-4 shadow">
        <span class="font-semibold text-yellow-700">Highest Score in a Round:</span> <span class="text-purple-700"><%= skyjo_stats[:highest_score] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-yellow-300 rounded p-4 shadow">
        <span class="font-semibold text-purple-700">Longest Streak of 0s:</span> <span class="text-yellow-700"><%= skyjo_stats[:longest_streak] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-purple-300 rounded p-4 shadow">
        <span class="font-semibold text-yellow-700">Rounds as First Finisher:</span> <span class="text-purple-700"><%= skyjo_stats[:total_first_finisher] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-yellow-300 rounded p-4 shadow">
        <span class="font-semibold text-purple-700">Risky Finishes Succeeded:</span> <span class="text-yellow-700"><%= skyjo_stats[:risky_success] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-purple-300 rounded p-4 shadow">
        <span class="font-semibold text-yellow-700">Risky Finishes Failed:</span> <span class="text-purple-700"><%= skyjo_stats[:risky_fail] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-yellow-300 rounded p-4 shadow">
        <span class="font-semibold text-purple-700">Total Risky Finishes:</span> <span class="text-yellow-700"><%= skyjo_stats[:risky_total] || 0 %></span>
      </div>
      <div class="bg-white border-2 border-purple-300 rounded p-4 shadow">
        <span class="font-semibold text-yellow-700">Risky Finish Success Rate:</span> <span class="text-purple-700"><%= skyjo_stats[:risky_ratio] || 0 %>%</span>
      </div>
    </div>
    <div class="mb-4">
      <h3 class="font-bold text-lg mb-2 text-purple-700">Trophies Acquired</h3>
      <div class="flex flex-wrap gap-2">
        <% (skyjo_stats[:trophy_counts] || {}).each do |key, count| %>
          <span class="badge badge-outline badge-sm bg-yellow-100 text-purple-700 border-yellow-300"><%= key.to_s.titleize %>: <%= count %></span>
        <% end %>
      </div>
    </div>
  </div>
<% else %>
  <div class="text-gray-400 italic">No Skyjo stats available.</div>
<% end %>
